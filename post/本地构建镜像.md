> 这篇文档将指导您通过源码在本地对 UOJ 进行构建。
>
> 构建 UOJ 可能需要较好的国际互联网连接

## 构建前的准备

您需要准备一台 **64 位**的 Linux 系统，这里建议您使用 [Ubuntu](https://www.ubuntu.com/)。

您需要安装 `docker`。它是一个容器技术，暂且可以理解成虚拟机。
```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

sudo systemctl start docker                     # 启动 docker 服务
sudo docker --version               # 检查 docker 是否正常安装
```

您还需要下载 `git` 以从 GitHub 克隆 UOJ 源码：

```bash
sudo apt-get update
sudo apt-get -y install git
```

<!-- 另外，您可以通过下面的代码安装docker加速器（强烈推荐）：
```bash
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn"]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```
-->

## 克隆 UOJ 源码

您需要执行下面的指令来从 GitHub 克隆 UOJ 源码：

```bash
git clone https://github.com/UniversalOJ/UOJ-System.git
```

## 使用 Docker 构建 UOJ

您需要执行下面的指令以通过源码编译 UOJ：

```bash
cd UOJ-System/install/bundle/
sudo docker build -t uoj-system .
```

您可能需要等待一段时间来完成 UOJ 的构建。

构建结束时，您应该能够看到屏幕上显示

```
Successfully built xxxxxx
Successfully tagged uoj-system:latest
```

构建结束后您可以使用本地构建的镜像运行 UOJ，参考指令为

```bash
sudo docker run --name uoj -dit -p 80:80 --cap-add SYS_PTRACE uoj-system
```

稍等几分钟，访问服务器的地址，您现在应该能看到UOJ正在运行了。

